<!DOCTYPE html>
<html>
    <head>
		<script type="text/javascript">
			function test() {
				var str = document.getElementById("text1").innerHTML;
				//alert(str);
				var obj = eval(str);
				drag("div1");
			}
			
			drag:function(id) {
            var $ = function (flag) {
                return document.getElementById(flag);
            }
            $(id).onmousedown = function (e) {
                var d = document;
                var  that=this;
                var page = {
                    event: function (evt) {
                        var ev = evt || window.event;
                        return ev;
                    },
                    pageX: function (evt) {
                        var e = this.event(evt);
                        return e.pageX || (e.clientX + document.body.scrollLeft - document.body.clientLeft);
                    },
                    pageY: function (evt) {
                        var e = this.event(evt);
                        return e.pageY || (e.clientY + document.body.scrollTop - document.body.clientTop);

                    },
                    layerX: function (evt) {
                        var e = this.event(evt);
                        return e.layerX || e.offsetX;
                    },
                    layerY: function (evt) {
                        var e = this.event(evt);
                        return e.layerY || e.offsetY;
                    }
                }            
                var x = page.layerX(e);
                var y = page.layerY(e);       
                if (that.setCapture) {
                    that.setCapture();
                }
                else if (window.captureEvents) {
                    window.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP);
                }
                d.onmousemove = function (e) {                   
                    var tx = page.pageX(e) - x;
                    var ty = page.pageY(e) - y;
                    that.style.left = tx + "px";
                    that.style.top = ty + "px";
                }
                d.onmouseup = function () {
                    if (that.releaseCapture) {
                        that.releaseCapture();
                    }
                    else if (window.releaseEvents) {
                        window.releaseEvents(Event.MOUSEMOVE | Event.MOUSEUP);
                    }
                    d.onmousemove = null;
                    d.onmouseup = null;
                }
            }
        }
				
		</Script>
        <meta charset="UTF-8">
        <title>椭圆</title>
		<style type="text/css">
			body {
				overflow-y: auto;
				overflow-x: hidden;
			}
			div {
				border: 5px solid red;
				width: 400px;
				height: 400px;
			}
			#d2 {
				width: 250px;
				height: 50px;
				border-color:blue;
			}
			#d3 {
				width: 300px;
				border-color:green;
			}
			#d7{
				width:150px;
				border-color:orange;
		}
		</style>
    </head>
    <body onload="test()">
	    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="500" height="500">
            <line x1="0" y1="0" x2="500" y2="500" style="stroke:rgb(0,0,255);stroke-width:3" />
        </svg>
		
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="500" hidden="500">
            <ellipse cx="300" cy="80" rx="100" ry="50" style="fill:yellow;stroke:dodgerblue;stroke-width:5" />
        </svg>
		
		<div id="div1">
		<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="800" height="500">
            <text id="text1" x="0" y="50" fill="blue" style="font-size:30px; font-family: 'microsoft yahei';">console.log("test")</text>
            <rect x="40" y="60" width="260" height="260" style="fill:blue;stroke:pink;stroke-width:5;
fill-opacity:0.1;stroke-opacity:0.9" />
        </svg>
		</div>
    </body>
</html>